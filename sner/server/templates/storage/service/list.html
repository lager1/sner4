{#- This file is part of sner4 project governed by MIT license, see the LICENSE.txt file. -#}
{% extends "base.html" %}

{% block title %}Services / List{% endblock %}

{% block script %}
<script type="text/javascript">
	var dt_service_list_table_options = {
		'ajax': {'url': "{{ url_for('storage.service_list_json_route', **request.args) }}", 'method': 'POST'},
		'columns': [
			Sner.dt.column('id', {'visible': false}),
			Sner.dt.column('host_id', {'visible': false}),
			Sner.dt.column('host_address', {'render': function (data, type, row, meta) { return storage_pagepart_host_link(row); }}),
			Sner.dt.column('host_hostname'),
			Sner.dt.column('proto'),
			Sner.dt.column('port'),
			Sner.dt.column('name'),
			Sner.dt.column('state'),
			Sner.dt.column('info'),
			Sner.dt.column('tags'),
			Sner.dt.column('comment'),
			Sner.dt.column_buttons(storage_pagepart_service_controls)
		]
	};
	$(document).ready(function() {
		var dt_service_list_table = $('#service_list_table').DataTable($.extend({}, Sner.dt.ajax_options, dt_service_list_table_options));
	});
</script>
{% endblock %}

{% block content %}
{% call cm.heading(['Services']) %}{% endcall %}

<div id="service_list_table_toolbar" class="dt_toolbar">
	{% if 'filter' in request.args %}<a class="btn btn-info" href="{{ url_for('storage.service_list_route') }}">unfilter</a>{% endif %}
</div>

<table id="service_list_table" class="table table-hover table-sm" width="100%"></table>
{% endblock %}
